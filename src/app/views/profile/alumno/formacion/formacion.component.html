<div *ngIf="!editandoElemento && !creandoElemento">

<!--  <form [formGroup]="formulario" (ngSubmit)="submit()">
    <table border=1>
      <caption id="títuloTabla">Experiencia</caption>
      <thead class="encabezado">
          <tr>
            <th>tipo</th>
            <th>familia</th>
            <th>centro</th>
            <th>nivel</th>
            <th>titulo</th>
            <th>fecha</th>
            <th>dual</th>
            <th>bilingüe</th>
            <th>certificado</th>
          </tr>
        </thead>
        <tbody formArrayName="datos">
      <tr *ngFor="let aux of formulario.get('datos').controls; let i = index;"
         [formGroupName]="i">
            <td><input type="text" formControlName="tipo" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}"></td>
            <td><input type="text" formControlName="familia" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}"></td>
            <td><input type="text" formControlName="centro" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}"></td>
            <td><input type="text" formControlName="nivel" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}"></td>
            <td><input type="text" formControlName="titulo" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}"></td>
            <td><input type="text" formControlName="fecha" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}"></td>
            <td><input type="text" formControlName="dual" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}"></td>
            <td><input type="text" formControlName="bilingüe" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}"></td>
            <td><input type="text" formControlName="certificado" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}"></td>
          <td><button type="button" [disabled]="editandoCampo" (click)="editarElemento(i)">Editar</button>
          <button type="button" [disabled]="editandoCampo" (click)="borrarElemento(i)">Borrar</button>
        <button (click)="terminarEdicion('idiomas')" [disabled]="i!==this.numElementoEnEdicion">Terminar edidión</button></td>
        </tr>
        <button type="button" (click)="anyadirElemento()" [disabled]="editandoCampo">Añadir formación</button>
        <button routerLink="/profile/alumno" [disabled]="editandoCampo">Volver atrás</button>
  </table>
</form>-->

  <table border=1>
    <caption id="títuloTabla">Formación</caption>
    <thead class="encabezado">
        <tr *ngFor="let llave of llaves">
          <th scope="col" *ngFor="let valor of llave">{{valor}}</th>
          <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
      <tr *ngFor="let valor of valores; let i=index;">
        <td *ngFor="let campo of valor">
        {{campo}}</td>
        <td><button type="button" (click)="editarElemento(i)" [disabled]="editandoElemento">Editar</button>
        <button type="button" (click)="borrarElemento(i)" [disabled]="editandoElemento">Borrar</button>
      </tr>
      <button type="button" (click)="nuevoElemento()">Añadir formación</button>
      <button routerLink="/profile/alumno">Volver atrás</button>
    </tbody>
  </table>
</div>

<div *ngIf="editandoElemento">
  <form [formGroup]="formulario">
    <ul>
      <li>
        Tipo: <input type="text" formControlName="tipo" class="editable">
      </li>
      <li>
        Familia <select formControlName="familia" (change)="siFamiliaCambia($event)">
          <option *ngFor="let fam of familiasFP" [value]="fam">{{fam}}</option>
          <div *ngIf="formulario.controls['familia'].hasError('required')" class="error">Campo obligatorio</div>
        </select>
      </li>
      <li>
        Nivel: <select formControlName="nivel" (change)="siNivelCambia($event)">
          <option *ngFor="let nivel of matrizNivelesEducativos" [value]="nivel">{{nivel}}</option>
          <div *ngIf="formulario.controls['nivel'].hasError('required')" class="error">Campo obligatorio</div>
        </select>
      </li>
      <li>
        Título: <select formControlName="titulo">
          <option *ngFor="let titulo of matrizTitulos" [value]="titulo">{{titulo}}</option>
          </select>
          <div *ngIf="formulario.controls['titulo'].hasError('required')" class="error">Campo obligatorio</div>
      </li>
      <li>
        Centro: <select formControlName="centro">
          <option *ngFor="let cent of matrizInstitutos" [value]="cent">{{cent}}</option>
          <div *ngIf="formulario.controls['centro'].hasError('required')" class="error">Campo obligatorio</div>
          </select>
      </li>
      <li>
      </li>
      <li>
        Fecha: <input type="text" formControlName="fecha" class="editable">
        <div *ngIf="formulario.controls['fecha'].hasError('fechaIncorrecta')" class="error">El formato de fecha correcto es: DD/MM/AAAA</div>
      </li>
      <li>
        Dual: <input type="checkbox" formControlName="dual" class="editable">
      </li>
        Bilingüe: <input type="checkbox" formControlName="bilingüe" class="editable">
      <li>
        Certificado: <input type="checkbox" value="" formControlName="certificado" class="editable">
      </li>
      <li>
        <button (click)="guardarCambios()" [disabled]="!formulario.valid">Guardar</button>
      </li>
    </ul>
  </form>
</div>


<div *ngIf="creandoElemento">
  <form [formGroup]="formulario">
    <ul>
      <li>Tipo: <select formControlName="tipo">
            <!--ngValue guarda el índice-->
            <option *ngFor="let id of tipoTitulo" [value]="id">{{id}}</option>
          </select>
      </li><li>
            Familia: <select formControlName="familia" (change)="siFamiliaCambia($event, i)">
              <option *ngFor="let fam of familiasFP" [value]="fam">{{fam}}</option>
            </select>
      </li><li>
          Nivel: <select formControlName="nivel" (change)="siNivelCambia($event, i)">
            <option *ngFor="let nivel of matrizNivelesEducativos" [value]="nivel">{{nivel}}</option>
          </select>
        </li><li>
          Título: <select formControlName="titulo">
            <option *ngFor="let tit of matrizTitulos" [value]="tit">{{tit}}</option>
          </select>
        </li><li>
          Centro: <input type="text" formControlName="centro" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}">
        </li><li>
        <!--          <td><input type="text" formControlName="titulo" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}"></td>-->
          Fecha: <input type="text" formControlName="fecha" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}">
        </li><li>
          Dual: <input type="checkbox" formControlName="dual" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}">
        </li><li>
          Bilingüe: <input type="checkbox" formControlName="bilingüe" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}">
        <!--          <td><input type="text" formControlName="certificado" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}"></td>-->
        </li><li>
          Certificado <input type="checkbox" formControlName="certificado" [ngClass]="{'editable': i===this.numElementoEnEdicion, 'noEditable': i!==this.numElementoEnEdicion}">
        </li><li>
          <button (click)="terminarEdicion()">Terminar edición</button>
          <button (click)="atras()">Volver atrás</button>
        </li>
      </ul>
    </form>
</div>
